# BallotLab

Encapsulated Python software for generating EAC-compliant ballots from NIST 1500-100 election definition datasets, part of the OSET BallotStudio project.

## Getting Started

This Python project uses Poetry for dependency management. To get started:

1. Clone this repo, or create a fork, on your development workstation.
2. Install Poetry on your development workstation (if needed).
3. At the command line, use `cd` to go to the project's root directory in your repo.
4. Run `poetry install` to configure your virtual environment and add all the required python packages.
5. Run `poetry shell` to invoke the virtual environment.

For detailed instructions on how to work with the code in this repo, check out [Getting Started with BallotLab · TrustTheVote-Project/BallotLab Wiki](https://github.com/TrustTheVote-Project/BallotLab/wiki/Getting-Started-with-BallotLab).

Once you've set up the virtual environment with `poetry shell` you can run the Python app from the root of this repo:

```python
python -m src.electos.ballotmaker --help        # display the CLI help text
python -m src.electos.ballotmaker --version     # display the current version number
```

**Important**: use the `-m` argument (`python -m`) to ensure Python can find all the local modules from the root directory.

## Running Tests

After you've followed the steps above in **Getting Started**, you can also run the `pytest` suite with this command:

```python
python -m pytest
```

Again, run that command from the root directory of this repo, using the `python -m` option.

## The Wiki

In addition to detailed instructions on how to get started with BallotLab, the [TrustTheVote-Project/BallotLab Wiki](https://github.com/TrustTheVote-Project/BallotLab/wiki) includes the latest requirements, best practices for ballot design, and other useful information.

## Project Structure

This Python project follows the current best practices for Python project organization, as specified in [Packaging Python Projects — Python Packaging User Guide](https://packaging.python.org/tutorials/packaging-projects/) but also includes a few unusual folders:

* The `assets` folder contains the sample data files, fonts and images required to build ballots, including [Roboto from Google Fonts](https://fonts.google.com/specimen/Roboto).
* The `pdfs` folder contains the PDFs generated by the software. Ballot PDFs contain a date and time stamp in the file name, so you can check out the progression of the layout features from the resulting PDF files. I don't keep all of the PDFs I generate, but I try to keep representative samples that correspond to major features.
* The `samplecode` folder contains code snippets from other sources, typically mutateted and mangled to suit my needs. This is essentially "proof-of-concept" code that won't appear in the production version of this software package.
* The `docs` folder contains the two documents that serve as the offical specifications for both the input data (NIST.SP.1500-100r2.pdf) and the output PDF ballots (EAC_Effective_Election_Design.pdf). I've also converted the EAC Design doc to HTML and text file format using the pdfminer.six Python package.

## Election Specifications

This software conforms to the following US Election specifications: [usnistgov/ElectionResultsReporting at version2](https://github.com/usnistgov/ElectionResultsReporting/tree/version2). We're also using the EAC Effective Elections Design document as our standard for ballot layout. These documents are available in the `docs` folder in this repo, too.
